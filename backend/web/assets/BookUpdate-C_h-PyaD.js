import{_ as D,k as v,r as h,l as E,u as L,o as M,a as c,b as s,c as d,d as p,f as t,g as n,F as y,y as T,j as x,m as j,n as V,e as m,h as w,q as H,s as J,i as K,v as O}from"./index-c37oU-Y1.js";const Q=r=>(H("data-v-c11c192b"),r=r(),J(),r),W=Q(()=>m("div",{style:{"border-bottom":"solid 1px #b1b3b8","margin-bottom":"10px","padding-bottom":"10px"}},[m("span",null,"Update Book")],-1)),X=["src"],Y={class:"static-content-item"},Z={__name:"BookUpdate",setup(r){const a=v({book_name:"",grade_id:"",publish:"",book_image:""}),i=v({token:"",key:"",crc32:"",accept:""});h("");const _=h([]),b=E(),U=K(),f=T();L();const B=()=>{b.proxy.$refs.vForm.validate(e=>{e&&c({url:"/v1/learn/book/update?id="+f.params.id,method:"put",data:a},function(o){o.code==0&&(F(),U.push("/book")),x(o.message)})})},F=()=>{b.proxy.$refs.vForm.resetFields()},C=(e,o)=>{console.log(e),a.lesson_image="https://file.bestguozi.work/"+e.key},P=()=>{console.log("handlePictureCardPreview")},I=()=>{console.log("handleRemove")},S=e=>{console.log("beforeAvatarUpload");let o=O();return console.log(o),i.token=o.token,i.key=o.key,!0},N=()=>{c({url:"/v1/learn/grade/index",method:"get"},function(e){e.code==0?_.value=e.data:x(e.message)})};return M(()=>{c({url:"/v1/learn/book/view?id="+f.params.id,method:"get"},function(e){e.code==0&&(a.book_name=e.data.book_name,a.grade_id=e.data.grade_id,a.book_image=e.data.book_image,a.publish=e.data.publish)}),N()}),(e,o)=>{const k=s("el-input"),u=s("el-form-item"),R=s("el-option"),$=s("el-select"),q=s("Plus"),z=s("el-icon"),A=s("el-upload"),g=s("el-button"),G=s("el-form");return d(),p(y,null,[W,t(G,{model:a,ref:"vForm",rules:e.rules,"label-position":"left","label-width":"150px",size:"default"},{default:n(()=>[t(u,{label:"Book Name",prop:"book_name"},{default:n(()=>[t(k,{modelValue:a.book_name,"onUpdate:modelValue":o[0]||(o[0]=l=>a.book_name=l),type:"text",clearable:""},null,8,["modelValue"])]),_:1}),t(u,{label:"Grade",prop:"grade_id"},{default:n(()=>[t($,{modelValue:a.grade_id,"onUpdate:modelValue":o[1]||(o[1]=l=>a.grade_id=l),placeholder:"Grade",style:{width:"240px"}},{default:n(()=>[(d(!0),p(y,null,j(_.value,l=>(d(),V(R,{key:l.id,label:l.grade_name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(u,{label:"Publish",prop:"publish"},{default:n(()=>[t(k,{modelValue:a.publish,"onUpdate:modelValue":o[2]||(o[2]=l=>a.publish=l),type:"text",clearable:""},null,8,["modelValue"])]),_:1}),t(u,{label:"Book Image",prop:"book_image"},{default:n(()=>[t(A,{name:"file",action:"http://up-z2.qiniup.com",data:i,class:"avatar-uploader","show-file-list":!1,"on-preview":P,"on-remove":I,"on-success":C,"before-upload":S,"list-type":"picture-card"},{default:n(()=>[a.book_image?(d(),p("img",{key:0,src:a.book_image,class:"avatar",width:"148",height:"148"},null,8,X)):(d(),V(z,{key:1,class:"avatar-uploader-icon"},{default:n(()=>[t(q)]),_:1}))]),_:1},8,["data"])]),_:1}),m("div",Y,[t(g,{onClick:B},{default:n(()=>[w("Upload")]),_:1}),t(g,{onClick:o[3]||(o[3]=l=>e.$router.push({name:"book"}))},{default:n(()=>[w("Back")]),_:1})])]),_:1},8,["model","rules"])],64)}}},oe=D(Z,[["__scopeId","data-v-c11c192b"]]);export{oe as default};
