import{_ as F,k as B,b as n,c as i,d as b,f as a,g as s,F as C,l as P,u as S,o as $,m as A,n as I,p as w,e as g,h as y,i as U,a as N,j as _,q as R,s as G,v as T,x as j}from"./index-DQxQca8F.js";const q=B({components:{},props:{},setup(){const e=P({formData:{book_name:"",grade_id:"",publish:"",book_image:""},options:[],rules:{}}),t=j(),v=U(),m=S(),k=()=>{t.proxy.$refs.vForm.validate(o=>{o&&N({url:"/x1/learn/book/create",headers:{Accept:"application/json","X-Api-Key":m.getToken()},method:"post",data:e.formData}).then(function(d){d.data.status==200&&d.data.code==0&&(p(),v.push("/book")),_(d.data.message)})})},p=()=>{t.proxy.$refs.vForm.resetFields()},u=(o,d)=>{o.status==200&&o.code==0?e.formData.book_image=o.data.image_url:_(o.message)},r=()=>{console.log("handlePictureCardPreview")},c=()=>{console.log("handleRemove")},f=()=>{R({url:"/x1/learn/grade/index",method:"get"},function(o){o.code==0?e.options=o.data:_(o.message)})};return $(()=>{f()}),{...A(e),submitForm:k,resetForm:p,handleAvatarSuccess:u,handlePictureCardPreview:r,handleRemove:c,userStore:m}}}),x=e=>(G("data-v-2dab1305"),e=e(),T(),e),E=x(()=>g("div",{style:{"border-bottom":"solid 1px #b1b3b8","margin-bottom":"10px","padding-bottom":"10px"}},[g("span",null,"Create New Book")],-1)),K=["src"],L={class:"static-content-item"};function M(e,t,v,m,k,p){const u=n("el-input"),r=n("el-form-item"),c=n("el-option"),f=n("el-select"),o=n("Plus"),d=n("el-icon"),D=n("el-upload"),h=n("el-button"),V=n("el-form");return i(),b(C,null,[E,a(V,{model:e.formData,ref:"vForm",rules:e.rules,"label-position":"left","label-width":"150px",size:"default"},{default:s(()=>[a(r,{label:"Book Name",prop:"book_name"},{default:s(()=>[a(u,{modelValue:e.formData.book_name,"onUpdate:modelValue":t[0]||(t[0]=l=>e.formData.book_name=l),type:"text",clearable:""},null,8,["modelValue"])]),_:1}),a(r,{label:"Grade",prop:"grade_id"},{default:s(()=>[a(f,{modelValue:e.formData.grade_id,"onUpdate:modelValue":t[1]||(t[1]=l=>e.formData.grade_id=l),placeholder:"Grade",style:{width:"240px"}},{default:s(()=>[(i(!0),b(C,null,I(e.options,l=>(i(),w(c,{key:l.id,label:l.grade_name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(r,{label:"Publish",prop:"publish"},{default:s(()=>[a(u,{modelValue:e.formData.publish,"onUpdate:modelValue":t[2]||(t[2]=l=>e.formData.publish=l),type:"text",clearable:""},null,8,["modelValue"])]),_:1}),a(r,{label:"Book Image",prop:"book_image"},{default:s(()=>[a(D,{name:"Upload[imageFile]",action:"/x1/upload/file",headers:{"X-Api-Key":e.userStore.getToken()},class:"avatar-uploader","show-file-list":!1,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,"list-type":"picture-card"},{default:s(()=>[e.formData.book_image?(i(),b("img",{key:0,src:e.formData.book_image,class:"avatar",width:"148",height:"148"},null,8,K)):(i(),w(d,{key:1,class:"avatar-uploader-icon"},{default:s(()=>[a(o)]),_:1}))]),_:1},8,["headers","on-preview","on-remove","on-success","before-upload"])]),_:1}),g("div",L,[a(h,{onClick:e.submitForm},{default:s(()=>[y("Create")]),_:1},8,["onClick"]),a(h,{onClick:t[3]||(t[3]=l=>e.$router.push({name:"book"}))},{default:s(()=>[y("Back")]),_:1})])]),_:1},8,["model","rules"])],64)}const z=F(q,[["render",M],["__scopeId","data-v-2dab1305"]]);export{z as default};
