import{_ as G,k,r as g,l as R,u as D,o as E,b as n,c as r,d as i,f as t,g as s,F as v,a as h,j as x,m as L,n as y,p as M,e as p,h as V,q as T,s as j,i as H,v as J,x as K}from"./index-c37oU-Y1.js";const O=d=>(T("data-v-1cb8c88a"),d=d(),j(),d),Q=O(()=>p("div",{style:{"border-bottom":"solid 1px #b1b3b8","margin-bottom":"10px","padding-bottom":"10px"}},[p("span",null,"Create New Book")],-1)),W=["src"],X={class:"static-content-item"},Y={__name:"BookCreate",setup(d){const a=k({book_name:"",grade_id:"",publish:"",book_image:""}),m=g([]),c=k({token:"",key:"",crc32:"",accept:""});g("");const _=R(),w=H();D();const C=()=>{_.proxy.$refs.vForm.validate(o=>{o&&h({url:"/v1/learn/book/create",method:"post",data:a}).then(function(e){e.code==0&&(B(),w.push("/book")),x(e.message)})})},B=()=>{_.proxy.$refs.vForm.resetFields()},F=(o,e)=>{console.log(o),a.book_image="https://file.bestguozi.work/"+o.key},U=()=>{console.log("handlePictureCardPreview")},I=()=>{console.log("handleRemove")},N=o=>{console.log("beforeAvatarUpload");let e=J();return console.log(e),c.token=e.token,c.key=e.key,!0},P=()=>{h({url:"/v1/learn/grade/index",method:"get"},function(o){o.code==0?m.value=o.data:x(o.message)})};return E(()=>{P()}),(o,e)=>{const b=n("el-input"),u=n("el-form-item"),S=n("el-option"),$=n("el-select"),q=n("el-icon"),z=n("el-upload"),f=n("el-button"),A=n("el-form");return r(),i(v,null,[Q,t(A,{model:a,ref:"vForm",rules:o.rules,"label-position":"left","label-width":"150px",size:"default"},{default:s(()=>[t(u,{label:"Book Name",prop:"book_name"},{default:s(()=>[t(b,{modelValue:a.book_name,"onUpdate:modelValue":e[0]||(e[0]=l=>a.book_name=l),type:"text",clearable:""},null,8,["modelValue"])]),_:1}),t(u,{label:"Grade",prop:"grade_id"},{default:s(()=>[t($,{modelValue:a.grade_id,"onUpdate:modelValue":e[1]||(e[1]=l=>a.grade_id=l),placeholder:"Grade",style:{width:"240px"}},{default:s(()=>[(r(!0),i(v,null,L(m.value,l=>(r(),y(S,{key:l.id,label:l.grade_name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(u,{label:"Publish",prop:"publish"},{default:s(()=>[t(b,{modelValue:a.publish,"onUpdate:modelValue":e[2]||(e[2]=l=>a.publish=l),type:"text",clearable:""},null,8,["modelValue"])]),_:1}),t(u,{label:"Book Image",prop:"book_image"},{default:s(()=>[t(z,{name:"file",action:"https://up-z2.qiniup.com",data:c,class:"avatar-uploader","show-file-list":!1,"on-preview":U,"on-remove":I,"on-success":F,"before-upload":N,"list-type":"picture-card"},{default:s(()=>[a.book_image?(r(),i("img",{key:0,src:a.book_image,class:"avatar",width:"148",height:"148"},null,8,W)):(r(),y(q,{key:1,class:"avatar-uploader-icon"},{default:s(()=>[t(M(K))]),_:1}))]),_:1},8,["data"])]),_:1}),p("div",X,[t(f,{onClick:C},{default:s(()=>[V("Create")]),_:1}),t(f,{onClick:e[3]||(e[3]=l=>o.$router.push({name:"book"}))},{default:s(()=>[V("Back")]),_:1})])]),_:1},8,["model","rules"])],64)}}},ee=G(Y,[["__scopeId","data-v-1cb8c88a"]]);export{ee as default};
