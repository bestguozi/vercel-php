import{_ as V,k as w,b as d,c as f,d as g,f as t,g as l,F,l as C,u as B,o as P,a as h,m as U,p as A,e as b,h as v,i as S,j as D,s as $,v as I,x as R}from"./index-DQxQca8F.js";const N=w({components:{},props:["id"],setup(e){const a=C({formData:{book_name:"",grade_id:"",publish:"",book_image:""},rules:{}}),u=R(),_=S(),m=B(),k=()=>{u.proxy.$refs.vForm.validate(o=>{o&&h({url:"/x1/learn/book/update?id="+e.id,headers:{Accept:"application/json","X-Api-Key":m.getToken()},method:"put",data:a.formData}).then(function(s){s.data.status==200&&s.data.code==0&&(n(),_.push("/book")),D(s.data.message)})})},n=()=>{u.proxy.$refs.vForm.resetFields()},r=(o,s)=>{o.status==200&&o.code==0?a.formData.lesson_image=o.data.image_url:D(o.message)},p=()=>{console.log("handlePictureCardPreview")},c=()=>{console.log("handleRemove")};return P(()=>{h({url:"/x1/learn/book/view?id="+e.id,headers:{Accept:"application/json","X-Api-Key":m.getToken()},method:"get"}).then(function(o){o.data.status==200&&o.data.code==0&&(a.formData.book_name=o.data.data.book_name,a.formData.grade_id=o.data.data.grade_id,a.formData.book_image=o.data.data.book_image,a.formData.publish=o.data.data.publish)})}),{...U(a),submitForm:k,resetForm:n,handleAvatarSuccess:r,handlePictureCardPreview:p,handleRemove:c,userStore:m}}}),T=e=>($("data-v-05019230"),e=e(),I(),e),j=T(()=>b("div",{style:{"border-bottom":"solid 1px #b1b3b8","margin-bottom":"10px","padding-bottom":"10px"}},[b("span",null,"Update Book")],-1)),K=["src"],X={class:"static-content-item"};function x(e,a,u,_,m,k){const n=d("el-input"),r=d("el-form-item"),p=d("Plus"),c=d("el-icon"),o=d("el-upload"),s=d("el-button"),y=d("el-form");return f(),g(F,null,[j,t(y,{model:e.formData,ref:"vForm",rules:e.rules,"label-position":"left","label-width":"150px",size:"default"},{default:l(()=>[t(r,{label:"Book Name",prop:"book_name"},{default:l(()=>[t(n,{modelValue:e.formData.book_name,"onUpdate:modelValue":a[0]||(a[0]=i=>e.formData.book_name=i),type:"text",clearable:""},null,8,["modelValue"])]),_:1}),t(r,{label:"Grade",prop:"grade_id"},{default:l(()=>[t(n,{modelValue:e.formData.grade_id,"onUpdate:modelValue":a[1]||(a[1]=i=>e.formData.grade_id=i),type:"text",clearable:""},null,8,["modelValue"])]),_:1}),t(r,{label:"Publish",prop:"publish"},{default:l(()=>[t(n,{modelValue:e.formData.publish,"onUpdate:modelValue":a[2]||(a[2]=i=>e.formData.publish=i),type:"text",clearable:""},null,8,["modelValue"])]),_:1}),t(r,{label:"Book Image",prop:"book_image"},{default:l(()=>[t(o,{name:"Upload[imageFile]",action:"/x1/upload/file",headers:{"X-Api-Key":e.userStore.getToken()},class:"avatar-uploader","show-file-list":!1,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,"list-type":"picture-card"},{default:l(()=>[e.formData.book_image?(f(),g("img",{key:0,src:e.formData.book_image,class:"avatar",width:"148",height:"148"},null,8,K)):(f(),A(c,{key:1,class:"avatar-uploader-icon"},{default:l(()=>[t(p)]),_:1}))]),_:1},8,["headers","on-preview","on-remove","on-success","before-upload"])]),_:1}),b("div",X,[t(s,{onClick:e.submitForm},{default:l(()=>[v("Upload")]),_:1},8,["onClick"]),t(s,{onClick:a[3]||(a[3]=i=>e.$router.push({name:"book"}))},{default:l(()=>[v("Back")]),_:1})])]),_:1},8,["model","rules"])],64)}const M=V(N,[["render",x],["__scopeId","data-v-05019230"]]);export{M as default};
