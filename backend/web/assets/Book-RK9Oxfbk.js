import{r as _,u as $,o as A,a as w,w as E,b as s,c as S,d as T,e as g,f as o,g as t,F as j,h as d,t as D,i as M,E as N,j as C}from"./index-DQxQca8F.js";const F={style:{"border-bottom":"solid 1px rgb(240, 242, 245)","padding-bottom":"3px"}},K={class:"example-pagination-block"},R={__name:"Book",setup(X){const b=M(),f=_([]),c=_(0),p=_(""),h=$();let r="/x1/learn/book/index?";A(()=>{m(1)});function m(e){let a=r.includes("=")?r+"&page="+e:r+"page="+e;w({url:a,headers:{"X-Api-Key":h.getToken()}}).then(i=>{let n=i.data;n.status==200&&n.code==0?(f.value=n.data,c.value=n.pagination.total):console.log(n.message)})}function v(e){console.log(e),b.push({name:"book-update",params:{id:e}})}function y(e){N.confirm("你确定要删除吗？","Warning",{title:"提示",message:"确定删除吗？",type:"warning"}).then(()=>{B(e)}).catch(()=>{C("已取消删除")})}function B(e){w({url:"/x1/learn/book/delete?id="+e,headers:{Accept:"application/json","X-Api-Key":h.getToken()},method:"delete"}).then(function(a){a.data.status==200&&a.data.code==0&&m(1),C(a.data.message)})}function L(e){console.log(e),b.push({name:"lesson",params:{book_id:e}})}return E(p,e=>{e!=""?r="/x1/learn/book/index?search="+e:r="/x1/learn/book/index?",getUserList(1)}),(e,a)=>{const i=s("el-button"),n=s("el-col"),V=s("el-input"),k=s("el-row"),u=s("el-table-column"),z=s("el-table"),U=s("el-pagination");return S(),T(j,null,[g("div",F,[o(k,null,{default:t(()=>[o(n,{span:16},{default:t(()=>[d(" Book "),o(i,{plain:"",onClick:a[0]||(a[0]=l=>e.$router.push("/book/create"))},{default:t(()=>[d("Create")]),_:1})]),_:1}),o(n,{span:8},{default:t(()=>[o(V,{modelValue:p.value,"onUpdate:modelValue":a[1]||(a[1]=l=>p.value=l),placeholder:"book name",style:{width:"70%"}},null,8,["modelValue"])]),_:1})]),_:1}),o(k,null,{default:t(()=>[o(n,{span:24,style:{"font-size":"14px"}},{default:t(()=>[d("All"),g("span",null," ("+D(c.value)+")",1)]),_:1})]),_:1})]),o(z,{data:f.value,border:"",style:{width:"100%"}},{default:t(()=>[o(u,{prop:"id",label:"ID","min-width":"10%"}),o(u,{prop:"book_name",label:"课本名称","min-width":"20%"}),o(u,{prop:"grade",label:"班级","min-width":"20%"}),o(u,{label:"课程","min-width":"15%"},{default:t(l=>[o(i,{size:"small",onClick:x=>L(l.row.id)},{default:t(()=>[d("查看课程")]),_:2},1032,["onClick"])]),_:1}),o(u,{fixed:"right",label:"操作","min-width":"15%"},{default:t(l=>[o(i,{size:"small",onClick:x=>v(l.row.id)},{default:t(()=>[d("编辑")]),_:2},1032,["onClick"]),o(i,{type:"danger",size:"small",onClick:x=>y(l.row.id)},{default:t(()=>[d("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),g("div",K,[o(U,{background:"",onSizeChange:m,onCurrentChange:e.getLessonList,layout:"prev, pager, next  jumper",total:c.value},null,8,["onCurrentChange","total"])])],64)}}};export{R as default};
